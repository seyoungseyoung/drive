<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presentation AI Tool</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- 좌측 사이드바 -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h1>Presentation AI</h1>
            </div>
            <div class="sidebar-content">
                <div class="slide-list" id="slideList">
                    <!-- 슬라이드 썸네일이 여기에 표시됩니다 -->
                </div>
                <button id="addSlideBtn" class="action-btn">
                    <i class="fas fa-plus"></i> 새 슬라이드
                </button>
            </div>
        </div>

        <!-- 메인 편집 영역 -->
        <div class="main-content">
            <!-- 상단 도구 모음 -->
            <div class="toolbar">
                <div class="tool-group">
                    <button id="newSlideBtn" class="tool-btn" title="새 슬라이드">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button id="deleteSlideBtn" class="tool-btn" title="슬라이드 삭제">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button id="duplicateSlideBtn" class="tool-btn" title="슬라이드 복제">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                <div class="tool-group">
                    <button id="addTextBtn" class="tool-btn" title="텍스트 추가">
                        <i class="fas fa-font"></i>
                    </button>
                    <button id="addShapeBtn" class="tool-btn" title="도형 추가">
                        <i class="fas fa-shapes"></i>
                    </button>
                    <button id="addImageBtn" class="tool-btn" title="이미지 추가">
                        <i class="fas fa-image"></i>
                    </button>
                    <button id="addChartBtn" class="tool-btn" title="차트 추가">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                </div>
                <div class="tool-group">
                    <button id="undoBtn" class="tool-btn" title="실행 취소">
                        <i class="fas fa-undo"></i>
                    </button>
                    <button id="redoBtn" class="tool-btn" title="다시 실행">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
                <div class="tool-group">
                    <button id="toggleAIBtn" class="tool-btn" title="AI 도구">
                        <i class="fas fa-robot"></i>
                    </button>
                    <button id="exportBtn" class="tool-btn" title="내보내기">
                        <i class="fas fa-file-export"></i>
                    </button>
                </div>
            </div>

            <!-- 편집 영역 -->
            <div class="editor-container">
                <div class="slide-preview">
                    <div id="currentSlide" class="slide-canvas">
                        <!-- 현재 슬라이드 내용이 여기에 표시됩니다 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 우측 속성 패널 -->
        <div class="properties-panel">
            <div class="panel-tabs">
                <button class="tab-btn active" data-tab="style">스타일</button>
                <button class="tab-btn" data-tab="position">위치/크기</button>
                <button class="tab-btn" data-tab="format">서식</button>
                <button class="tab-btn" data-tab="animation">애니메이션</button>
                <button class="tab-btn" data-tab="transition">전환</button>
            </div>
            <div class="panel-content">
                <!-- 스타일 탭 -->
                <div class="tab-content active" id="styleTab">
                    <!-- 슬라이드 배경 -->
                    <div class="style-group">
                        <h4>슬라이드 배경</h4>
                        <div class="color-controls">
                            <label>색상</label>
                            <input type="color" id="backgroundColorPicker">
                            <div class="preset-colors">
                                <div class="color-preset" style="background-color: #ffffff"></div>
                                <div class="color-preset" style="background-color: #f0f0f0"></div>
                                <div class="color-preset" style="background-color: #000000"></div>
                                <div class="color-preset" style="background-color: #3498db"></div>
                                <div class="color-preset" style="background-color: #e74c3c"></div>
                                <div class="color-preset" style="background-color: #2ecc71"></div>
                            </div>
                        </div>
                        <div class="input-row">
                            <label>불투명도</label>
                            <input type="range" id="backgroundOpacitySlider" min="0" max="100" value="100">
                            <span id="backgroundOpacityValue">100%</span>
                        </div>
                    </div>

                    <!-- 테마 선택 -->
                    <div class="style-group">
                        <h4>테마</h4>
                        <select id="themeSelect">
                            <option value="modern">모던</option>
                            <option value="classic">클래식</option>
                            <option value="minimal">미니멀</option>
                            <option value="corporate">기업형</option>
                            <option value="creative">창의적</option>
                        </select>
                    </div>

                    <!-- 색상 팔레트 -->
                    <div class="style-group">
                        <h4>색상 팔레트</h4>
                        <select id="colorPaletteSelect">
                            <option value="blue">파란색</option>
                            <option value="green">초록색</option>
                            <option value="purple">보라색</option>
                            <option value="orange">주황색</option>
                            <option value="monochrome">흑백</option>
                            <option value="custom">사용자 정의</option>
                        </select>
                    </div>

                    <!-- 글꼴 -->
                    <div class="style-group">
                        <h4>글꼴</h4>
                        <select id="fontSelect">
                            <option value="Pretendard">Pretendard</option>
                            <option value="Arial">Arial</option>
                            <option value="Times New Roman">Times New Roman</option>
                            <option value="Helvetica">Helvetica</option>
                            <option value="Roboto">Roboto</option>
                            <option value="Open Sans">Open Sans</option>
                        </select>
                    </div>
                </div>

                <!-- 위치/크기 탭 -->
                <div class="tab-content" id="positionTab">
                    <div class="style-group">
                        <h4>위치</h4>
                        <div class="input-row">
                            <label>X</label>
                            <input type="number" id="positionX" min="0" step="1">
                            <span>px</span>
                        </div>
                        <div class="input-row">
                            <label>Y</label>
                            <input type="number" id="positionY" min="0" step="1">
                            <span>px</span>
                        </div>
                    </div>

                    <div class="style-group">
                        <h4>크기</h4>
                        <div class="input-row">
                            <label>너비</label>
                            <input type="number" id="elementWidth" min="1" step="1">
                            <span>px</span>
                        </div>
                        <div class="input-row">
                            <label>높이</label>
                            <input type="number" id="elementHeight" min="1" step="1">
                            <span>px</span>
                        </div>
                        <div class="checkbox-row">
                            <input type="checkbox" id="lockAspectRatio">
                            <label for="lockAspectRatio">가로 세로 비율 유지</label>
                        </div>
                    </div>

                    <div class="style-group">
                        <h4>회전</h4>
                        <div class="input-row">
                            <label>각도</label>
                            <input type="number" id="rotationAngle" min="0" max="360" step="1" value="0">
                            <span>°</span>
                        </div>
                        <input type="range" id="rotationSlider" min="0" max="360" value="0">
                    </div>

                    <div class="style-group">
                        <h4>정렬</h4>
                        <div class="align-buttons">
                            <button id="alignLeft" title="왼쪽 정렬"><i class="fas fa-align-left"></i></button>
                            <button id="alignCenter" title="가운데 정렬"><i class="fas fa-align-center"></i></button>
                            <button id="alignRight" title="오른쪽 정렬"><i class="fas fa-align-right"></i></button>
                            <button id="alignTop" title="위쪽 정렬"><i class="fas fa-align-left fa-rotate-90"></i></button>
                            <button id="alignMiddle" title="중앙 정렬"><i class="fas fa-align-center fa-rotate-90"></i></button>
                            <button id="alignBottom" title="아래쪽 정렬"><i class="fas fa-align-right fa-rotate-90"></i></button>
                        </div>
                    </div>
                </div>

                <!-- 서식 탭 -->
                <div class="tab-content" id="formatTab">
                    <!-- 도형 서식 (도형 선택 시) -->
                    <div class="element-specific-controls" id="shapeFormatControls">
                        <div class="style-group">
                            <h4>채우기</h4>
                            <div class="input-row">
                                <label>색상</label>
                                <input type="color" id="shapeFillColor">
                            </div>
                            <div class="input-row">
                                <label>불투명도</label>
                                <input type="range" id="shapeFillOpacity" min="0" max="100" value="100">
                                <span id="shapeFillOpacityValue">100%</span>
                            </div>
                        </div>

                        <div class="style-group">
                            <h4>테두리</h4>
                            <div class="input-row">
                                <label>색상</label>
                                <input type="color" id="shapeStrokeColor">
                            </div>
                            <div class="input-row">
                                <label>두께</label>
                                <input type="range" id="shapeStrokeWidth" min="0" max="20" value="1">
                                <span id="shapeStrokeWidthValue">1px</span>
                            </div>
                            <div class="input-row">
                                <label>스타일</label>
                                <select id="shapeStrokeStyle">
                                    <option value="solid">실선</option>
                                    <option value="dashed">파선</option>
                                    <option value="dotted">점선</option>
                                </select>
                            </div>
                        </div>

                        <div class="style-group">
                            <h4>효과</h4>
                            <div class="input-row">
                                <label>그림자</label>
                                <input type="checkbox" id="shapeShadow">
                            </div>
                            <div class="input-row shadow-controls">
                                <label>크기</label>
                                <input type="range" id="shapeShadowSize" min="0" max="20" value="5">
                            </div>
                            <div class="input-row shadow-controls">
                                <label>색상</label>
                                <input type="color" id="shapeShadowColor" value="#000000">
                            </div>
                        </div>
                    </div>

                    <!-- 텍스트 서식 (텍스트 선택 시) -->
                    <div class="element-specific-controls" id="textFormatControls">
                        <div class="style-group">
                            <h4>텍스트</h4>
                            <div class="text-format-buttons">
                                <button id="textBold" title="굵게"><i class="fas fa-bold"></i></button>
                                <button id="textItalic" title="기울임"><i class="fas fa-italic"></i></button>
                                <button id="textUnderline" title="밑줄"><i class="fas fa-underline"></i></button>
                                <button id="textStrike" title="취소선"><i class="fas fa-strikethrough"></i></button>
                            </div>
                            <div class="input-row">
                                <label>색상</label>
                                <input type="color" id="textColor">
                            </div>
                            <div class="input-row">
                                <label>크기</label>
                                <input type="number" id="fontSize" min="8" max="96" step="1" value="16">
                                <span>pt</span>
                            </div>
                            <div class="input-row">
                                <label>줄 간격</label>
                                <input type="number" id="lineHeight" min="0.5" max="3" step="0.1" value="1.2">
                            </div>
                            <div class="text-align-buttons">
                                <button id="textAlignLeft" title="왼쪽 정렬"><i class="fas fa-align-left"></i></button>
                                <button id="textAlignCenter" title="가운데 정렬"><i class="fas fa-align-center"></i></button>
                                <button id="textAlignRight" title="오른쪽 정렬"><i class="fas fa-align-right"></i></button>
                                <button id="textAlignJustify" title="양쪽 정렬"><i class="fas fa-align-justify"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- 이미지 서식 (이미지 선택 시) -->
                    <div class="element-specific-controls" id="imageFormatControls">
                        <div class="style-group">
                            <h4>이미지</h4>
                            <div class="input-row">
                                <label>불투명도</label>
                                <input type="range" id="imageOpacity" min="0" max="100" value="100">
                                <span id="imageOpacityValue">100%</span>
                            </div>
                            <div class="input-row">
                                <label>테두리</label>
                                <input type="checkbox" id="imageBorder">
                            </div>
                            <div class="input-row border-controls">
                                <label>색상</label>
                                <input type="color" id="imageBorderColor">
                            </div>
                            <div class="input-row border-controls">
                                <label>두께</label>
                                <input type="range" id="imageBorderWidth" min="1" max="10" value="1">
                                <span id="imageBorderWidthValue">1px</span>
                            </div>
                        </div>

                        <div class="style-group">
                            <h4>효과</h4>
                            <div class="input-row">
                                <label>필터</label>
                                <select id="imageFilter">
                                    <option value="none">없음</option>
                                    <option value="grayscale">흑백</option>
                                    <option value="sepia">세피아</option>
                                    <option value="blur">흐림</option>
                                    <option value="brightness">밝게</option>
                                    <option value="contrast">대비</option>
                                </select>
                            </div>
                            <div class="input-row filter-intensity">
                                <label>강도</label>
                                <input type="range" id="imageFilterIntensity" min="0" max="100" value="50">
                                <span id="imageFilterIntensityValue">50%</span>
                            </div>
                        </div>
                    </div>

                    <!-- 차트 서식 (차트 선택 시) -->
                    <div class="element-specific-controls" id="chartFormatControls">
                        <div class="style-group">
                            <h4>차트 유형</h4>
                            <div class="chart-type-buttons">
                                <button class="chart-type-btn" data-chart-type="bar" title="막대 차트"><i class="fas fa-chart-bar"></i></button>
                                <button class="chart-type-btn" data-chart-type="line" title="선 차트"><i class="fas fa-chart-line"></i></button>
                                <button class="chart-type-btn" data-chart-type="pie" title="원형 차트"><i class="fas fa-chart-pie"></i></button>
                                <button class="chart-type-btn" data-chart-type="area" title="영역 차트"><i class="fas fa-chart-area"></i></button>
                            </div>
                        </div>

                        <div class="style-group">
                            <h4>데이터</h4>
                            <button id="editChartDataBtn" class="edit-btn">차트 데이터 편집</button>
                        </div>

                        <div class="style-group">
                            <h4>스타일</h4>
                            <div class="input-row">
                                <label>색상 팔레트</label>
                                <select id="chartColorPalette">
                                    <option value="default">기본</option>
                                    <option value="pastel">파스텔</option>
                                    <option value="monochrome">단색</option>
                                    <option value="vivid">선명한</option>
                                </select>
                            </div>
                            <div class="checkbox-row">
                                <input type="checkbox" id="chartShowLegend" checked>
                                <label for="chartShowLegend">범례 표시</label>
                            </div>
                            <div class="checkbox-row">
                                <input type="checkbox" id="chartShowLabels" checked>
                                <label for="chartShowLabels">레이블 표시</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 애니메이션 탭 -->
                <div class="tab-content" id="animationTab">
                    <div class="style-group">
                        <h4>애니메이션</h4>
                        <select id="animationSelect">
                            <option value="none">없음</option>
                            <option value="fade">페이드</option>
                            <option value="slide">슬라이드</option>
                            <option value="bounce">바운스</option>
                            <option value="zoom">확대/축소</option>
                            <option value="flip">뒤집기</option>
                            <option value="rotate">회전</option>
                        </select>
                    </div>

                    <div class="style-group animation-controls">
                        <h4>설정</h4>
                        <div class="input-row">
                            <label>지속 시간</label>
                            <input type="range" id="animationDuration" min="0.1" max="5" step="0.1" value="1">
                            <span id="animationDurationValue">1s</span>
                        </div>
                        <div class="input-row">
                            <label>지연 시간</label>
                            <input type="range" id="animationDelay" min="0" max="5" step="0.1" value="0">
                            <span id="animationDelayValue">0s</span>
                        </div>
                        <div class="input-row">
                            <label>시작 방법</label>
                            <select id="animationTrigger">
                                <option value="withPrevious">이전 요소와 함께</option>
                                <option value="afterPrevious">이전 요소 이후</option>
                                <option value="onClick">클릭 시</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 전환 탭 -->
                <div class="tab-content" id="transitionTab">
                    <div class="style-group">
                        <h4>전환 효과</h4>
                        <select id="transitionSelect">
                            <option value="none">없음</option>
                            <option value="fade">페이드</option>
                            <option value="slide">슬라이드</option>
                            <option value="zoom">확대/축소</option>
                            <option value="flip">뒤집기</option>
                            <option value="rotate">회전</option>
                            <option value="push">밀어내기</option>
                            <option value="reveal">드러내기</option>
                        </select>
                    </div>

                    <div class="style-group transition-controls">
                        <h4>설정</h4>
                        <div class="input-row">
                            <label>지속 시간</label>
                            <input type="range" id="transitionDuration" min="0.1" max="5" step="0.1" value="1">
                            <span id="transitionDurationValue">1s</span>
                        </div>
                        <div class="input-row">
                            <label>방향</label>
                            <select id="transitionDirection">
                                <option value="left">왼쪽에서</option>
                                <option value="right">오른쪽에서</option>
                                <option value="top">위에서</option>
                                <option value="bottom">아래에서</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI 생성 모달 -->
    <div id="aiModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>AI 프레젠테이션 생성</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <textarea id="aiPrompt" placeholder="프레젠테이션의 주제와 원하는 내용을 자세히 설명해주세요..."></textarea>
                <div class="ai-options">
                    <div class="option-group">
                        <label>슬라이드 수</label>
                        <input type="number" id="slideCount" min="1" max="20" value="5">
                    </div>
                    <div class="option-group">
                        <label>스타일</label>
                        <select id="presentationStyle">
                            <option value="professional">전문적</option>
                            <option value="creative">창의적</option>
                            <option value="minimal">미니멀</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="generateBtn" class="btn-primary">생성하기</button>
            </div>
        </div>
    </div>

    <!-- 도형 선택 모달 -->
    <div id="shapeModal" class="modal">
        <div class="modal-content">
            <h3>도형 선택</h3>
            <div class="shape-grid">
                <div class="shape-item" data-shape="rectangle">사각형</div>
                <div class="shape-item" data-shape="circle">원</div>
                <div class="shape-item" data-shape="triangle">삼각형</div>
                <div class="shape-item" data-shape="line">선</div>
                <div class="shape-item" data-shape="arrow">화살표</div>
                <div class="shape-item" data-shape="star">별</div>
            </div>
            <button class="close-btn">닫기</button>
        </div>
    </div>

    <!-- 이미지 업로드 모달 -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <h3>이미지 추가</h3>
            <div class="image-upload">
                <input type="file" id="imageInput" accept="image/*">
                <button id="uploadImageBtn">업로드</button>
            </div>
            <button class="close-btn">닫기</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>

    <!-- Font Awesome 추가 -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <!-- 디버그 정보 -->
    <div id="debug-info" style="position: fixed; bottom: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 5px; font-size: 12px; z-index: 9999; display: none;">
        <div>Slides: <span id="debug-slide-count">0</span></div>
        <div>Current: <span id="debug-current-slide">0</span></div>
        <div>Elements: <span id="debug-elements">0</span></div>
        <div><button id="toggle-debug">Hide</button></div>
    </div>

    <!-- 디버그 토글 -->
    <button id="show-debug" style="position: fixed; bottom: 0; right: 0; z-index: 9998; background: #333; color: white; border: none; padding: 5px;">Debug</button>

    <!-- 차트 데이터 편집 모달 -->
    <div id="chartDataModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>차트 데이터 편집</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="chart-data-container">
                    <table id="chartDataTable">
                        <thead>
                            <tr>
                                <th>카테고리</th>
                                <th>시리즈 1</th>
                                <th>시리즈 2</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="text" value="카테고리 1"></td>
                                <td><input type="number" value="10"></td>
                                <td><input type="number" value="20"></td>
                                <td><button class="delete-row-btn"><i class="fas fa-trash"></i></button></td>
                            </tr>
                            <tr>
                                <td><input type="text" value="카테고리 2"></td>
                                <td><input type="number" value="15"></td>
                                <td><input type="number" value="25"></td>
                                <td><button class="delete-row-btn"><i class="fas fa-trash"></i></button></td>
                            </tr>
                            <tr>
                                <td><input type="text" value="카테고리 3"></td>
                                <td><input type="number" value="8"></td>
                                <td><input type="number" value="18"></td>
                                <td><button class="delete-row-btn"><i class="fas fa-trash"></i></button></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="chart-data-buttons">
                        <button id="addChartRowBtn">행 추가</button>
                        <button id="addChartColumnBtn">열 추가</button>
                    </div>
                    
                    <div class="chart-labels">
                        <div class="input-row">
                            <label>차트 제목</label>
                            <input type="text" id="chartTitle" placeholder="차트 제목">
                        </div>
                        <div class="input-row">
                            <label>X축 레이블</label>
                            <input type="text" id="chartXLabel" placeholder="X축 레이블">
                        </div>
                        <div class="input-row">
                            <label>Y축 레이블</label>
                            <input type="text" id="chartYLabel" placeholder="Y축 레이블">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="applyChartDataBtn" class="btn-primary">적용</button>
                <button id="cancelChartDataBtn">취소</button>
            </div>
        </div>
    </div>

    <!-- 도형 편집 모달 -->
    <div id="shapeEditorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>도형 세부 편집</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="shape-editing-container">
                    <div class="shape-preview">
                        <div id="shapePreview"></div>
                    </div>

                    <div class="shape-controls">
                        <div class="control-section">
                            <h4>기본 속성</h4>
                            <div class="input-row">
                                <label>도형 종류</label>
                                <select id="shapeTypeSelect">
                                    <option value="rectangle">사각형</option>
                                    <option value="ellipse">타원</option>
                                    <option value="triangle">삼각형</option>
                                    <option value="pentagon">오각형</option>
                                    <option value="hexagon">육각형</option>
                                    <option value="star">별</option>
                                    <option value="arrow">화살표</option>
                                    <option value="callout">말풍선</option>
                                </select>
                            </div>
                        </div>

                        <div class="control-section">
                            <h4>모서리 둥글기</h4>
                            <div class="input-row">
                                <label>모든 모서리</label>
                                <input type="range" id="allCornerRadius" min="0" max="50" value="0">
                                <span id="allCornerRadiusValue">0px</span>
                            </div>
                            
                            <div class="checkbox-row">
                                <input type="checkbox" id="individualCorners">
                                <label for="individualCorners">각 모서리 개별 설정</label>
                            </div>
                            
                            <div class="individual-corners">
                                <div class="input-row">
                                    <label>좌상단</label>
                                    <input type="range" id="topLeftRadius" min="0" max="50" value="0">
                                    <span id="topLeftRadiusValue">0px</span>
                                </div>
                                <div class="input-row">
                                    <label>우상단</label>
                                    <input type="range" id="topRightRadius" min="0" max="50" value="0">
                                    <span id="topRightRadiusValue">0px</span>
                                </div>
                                <div class="input-row">
                                    <label>좌하단</label>
                                    <input type="range" id="bottomLeftRadius" min="0" max="50" value="0">
                                    <span id="bottomLeftRadiusValue">0px</span>
                                </div>
                                <div class="input-row">
                                    <label>우하단</label>
                                    <input type="range" id="bottomRightRadius" min="0" max="50" value="0">
                                    <span id="bottomRightRadiusValue">0px</span>
                                </div>
                            </div>
                        </div>

                        <div class="control-section">
                            <h4>특수 속성</h4>
                            <div class="input-row star-properties">
                                <label>별 꼭지점 수</label>
                                <input type="range" id="starPoints" min="3" max="12" value="5">
                                <span id="starPointsValue">5</span>
                            </div>
                            <div class="input-row star-properties">
                                <label>별 안쪽 반지름</label>
                                <input type="range" id="starInnerRadius" min="20" max="90" value="40">
                                <span id="starInnerRadiusValue">40%</span>
                            </div>
                            <div class="input-row arrow-properties">
                                <label>화살표 머리 크기</label>
                                <input type="range" id="arrowHeadSize" min="10" max="80" value="30">
                                <span id="arrowHeadSizeValue">30%</span>
                            </div>
                            <div class="input-row polygon-properties">
                                <label>다각형 각 수</label>
                                <input type="range" id="polygonSides" min="3" max="12" value="5">
                                <span id="polygonSidesValue">5</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="applyShapeEditorBtn" class="btn-primary">적용</button>
                <button id="cancelShapeEditorBtn">취소</button>
            </div>
        </div>
    </div>

    <!-- 그리드 및 안내선 설정 모달 -->
    <div id="gridSettingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>그리드 및 안내선 설정</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="grid-settings">
                    <div class="checkbox-row">
                        <input type="checkbox" id="showGrid">
                        <label for="showGrid">그리드 표시</label>
                    </div>
                    <div class="input-row">
                        <label>그리드 크기</label>
                        <input type="range" id="gridSize" min="5" max="50" value="20">
                        <span id="gridSizeValue">20px</span>
                    </div>
                    <div class="input-row">
                        <label>그리드 색상</label>
                        <input type="color" id="gridColor" value="#cccccc">
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="snapToGrid">
                        <label for="snapToGrid">그리드에 맞춤</label>
                    </div>
                </div>

                <div class="guides-settings">
                    <div class="checkbox-row">
                        <input type="checkbox" id="showGuides">
                        <label for="showGuides">안내선 표시</label>
                    </div>
                    <div class="input-row">
                        <label>안내선 색상</label>
                        <input type="color" id="guideColor" value="#3498db">
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="snapToGuides" checked>
                        <label for="snapToGuides">안내선에 맞춤</label>
                    </div>
                    <div class="checkbox-row">
                        <input type="checkbox" id="showSmartGuides" checked>
                        <label for="showSmartGuides">스마트 안내선 표시</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="applyGridSettingsBtn" class="btn-primary">적용</button>
                <button id="cancelGridSettingsBtn">취소</button>
            </div>
        </div>
    </div>
</body>
</html>